<div class="p-4 border border-gray-200 shadow-sm mb-4 rounded-lg">
    <div class="flex justify-between items-center mb-2">
        <div>
            <p class="font-semibold text-gray-700">
                Replied by {{ reply.user.user.username }}
            </p>
            {% if reply.reply_to %}
                <p class="text-gray-500">To {{ reply.reply_to.user.user.username }}</p>
            {% endif %}
        </div>

        <div class="flex items-center space-x-4">
            <span class="text-sm text-gray-500 flex items-center">
                <i class="fas fa-thumbs-up"></i> {{ reply.totalLike }}
            </span>
            <span class="text-sm text-gray-500 flex items-center">
                <i class="fas fa-thumbs-down"></i> {{ reply.totalDislike }}
            </span>
            {% if reply.user == request.user.userprofile %}
                <form method="POST" action="{% url 'yogforum:delete_reply' reply_id=reply.id %}" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="text-red-500 hover:text-red-700 ml-4">Delete</button>
                </form>
            {% endif %}
        </div>
    </div>

    <p class="text-gray-600 mb-2">{{ reply.content }}</p>
    <div class="flex justify-between text-sm text-gray-500">
        <p>{{ reply.created_at|date:"H:i" }} â€¢ {{ reply.created_at|date:"d/m/Y" }}</p>
        <a href="#" class="text-blue-500 hover:underline" onclick="openModal('reply-modal-{{ reply.id }}')">Reply to this Post</a>
    </div>
</div>

<!-- Nested Replies -->
{% if reply.forumreply_set.all %}
    <div class="ml-{{ level|add:"4" }}">
        {% for nested_reply in reply.forumreply_set.all %}
            {% include "components/reply.html" with reply=nested_reply level=level|add:1 %}
        {% endfor %}
    </div>
{% endif %}

<!-- Reply Modal -->
{% include "components/add_reply.html" with modal_id="reply-modal-{{ reply.id }}" %}